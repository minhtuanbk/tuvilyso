<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Simple Theme</title>
    <link href="./css/multiColumnTemplate.css" rel="stylesheet" type="text/css">
    <link href="./css/jquery.amlich.css" rel="stylesheet" type="text/css">
    <!-- <link href="./css/tuviglobal.min.css" rel="stylesheet" type="text/css"> -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- <script type="text/javascript" language="JavaScript" src="./js/jquery.amlich.js"></script> -->
    <script type="text/javascript" language="JavaScript" src="./js/jquery-2.1.0.min.js"></script>
    <script type="text/javascript" language="JavaScript" src="./js/jquery.amlich.min.js"></script>
    <style>
        body {
            margin: 0px;
            padding: 0px;
        }
        
        #canvasImg {
            border: 2px solid #9C9898;
        }
        
        wrapper_page {
            position: relative;
            overflow: hidden
        }
        
        fieldset {
            text-align: left;
            display: inline-block;
            vertical-align: middle;
        }
        
        div {
            text-align: center;
            vertical-align: middle;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <table style="width:100%">
                <tr>
                    <th>
                        <div id="amlich-text" style="width:400px;"></div>
                        <script type="text/javascript">
                            $(function() {
                                $('#amlich-text').amLich({
                                    type: 'text'
                                });
                            });
                        </script>
                    </th>
                    <th style="width:100px;">
                        <li style="background-color: #0fb6cc ;" width="10"> Đăng nhập</li>

                    </th>
                    <th style="width:100px;">
                        <li style="background-color:#0fb6cc ;">Xu</li>
                    </th>
                </tr>
            </table>

        </header>
        <section>

            <table style="width:100%">
                <tr>
                    <th width="100%">
                        <div class="SlideAnh">&copy;2020 - <strong>Slide Ảnh</strong></div>
                        <div>
                            <nav class="secondary_header" id="menu">
                                <ul>
                                    <li>MENU1</li>
                                    <li>MENU2</li>
                                    <li>MENU3</li>
                                    <li>MENU4</li>
                                    <li>MENU5</li>
                                    <li>CONTACT</li>
                                </ul>
                            </nav>
                        </div>
                        <div>
                            <!-- <h2 class="noDisplay">Main Content</h2>
                            <article class="left_article">
                            <h3>content heading</h3>
                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                                Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                                Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                            </article> -->
                            <p>
                                <canvas id="myCanvas" width="704" height="800" style="display:none;"></canvas>
                            </p>
                            <form name="form1" method="post" action="">
                                <p>
                                    <label for="ID_NGAY"></label> Ngày
                                    <label for="ID_NGAY"></label>
                                    <input type="text" name="ID_NGAY" id="ID_NGAY"> Tháng
                                    <label for="ID_THANG"></label>
                                    <input type="text" name="ID_THANG" id="ID_THANG">
                                    <label for="ID_THANG"></label> Năm
                                    <label for="ID_CANNAM"></label>
                                    <select name="ID_CANNAM" id="ID_CANNAM">
                                    <option value="1">Giáp</option>
                                    <option value="2">Ất</option>
                                    <option value="3">Bính</option>
                                    <option value="4">Đinh</option>
                                    <option value="5">Mậu</option>
                                    <option value="6">Kỷ</option>
                                    <option value="7">Canh</option>
                                    <option value="8">Tân</option>
                                    <option value="9">Nhâm</option>
                                    <option value="10">Quý</option>
                                  </select>
                                    <label for="ID_CHINAM"></label>
                                    <select name="ID_CHINAM" id="ID_CHINAM">
                                    <option value="1">Tý</option>
                                    <option value="2">Sửu</option>
                                    <option value="3">Dần</option>
                                    <option value="4">Mão</option>
                                    <option value="5">Thìn</option>
                                    <option value="6">Tỵ</option>
                                    <option value="7">Ngọ</option>
                                    <option value="8">Mùi</option>
                                    <option value="9">Thân</option>
                                    <option value="10">Dậu</option>
                                    <option value="11">Tuất</option>
                                    <option value="12">Hợi</option>
                                  </select> Giờ
                                    <label for="ID_GIO"></label>
                                    <select name="ID_GIO" id="ID_GIO">
                                    <option value="1">Tý</option>
                                    <option value="2">Sửu</option>
                                    <option value="3">Dần</option>
                                    <option value="4">Mão</option>
                                    <option value="5">Thìn</option>
                                    <option value="6">Tỵ</option>
                                    <option value="7">Ngọ</option>
                                    <option value="8">Mùi</option>
                                    <option value="9">Thân</option>
                                    <option value="10">Dậu</option>
                                    <option value="11">Tuất</option>
                                    <option value="12">Hợi</option>
                                  </select>
                                </p>
                                <p>Giới tính:
                                    <label for="ID_GIOITINH"></label>
                                    <select name="ID_GIOITINH" id="ID_GIOITINH">
                                    <option value="1">Nam</option>
                                    <option value="0">Nữ</option>
                                  </select>
                                </p>
                                <p>
                                    <input name="ID_TAPDIEU" type="checkbox" id="ID_TAPDIEU" checked>
                                    <label for="ID_TAPDIEU"></label> An tạp diệu</p>
                                <p>
                                    <input name="ID_THAITUE" type="checkbox" id="ID_THAITUE" checked>
                                    <label for="ID_THAITUE"></label> An Thái Tuế thập nhị thần</p>
                                <p>
                                    <input name="ID_TUONGTINH" type="checkbox" id="ID_TUONGTINH" checked>
                                    <label for="ID_TUONGTINH"></label> An Tướng Tinh thập nhị thần</p>
                                <p>
                                    <input name="ID_BACSI" type="checkbox" id="ID_BACSI" checked>
                                    <label for="ID_BACSI"></label> An Bác Sĩ Thập nhị thần</p>
                                <fieldset style="width:800px;">
                                    <legend>Lưu Cung</legend>
                                    <p>Năm Xem:
                                        <select name="ID_CANLUUNIEN" id="ID_CANLUUNIEN">
                                      <option value="1">Giáp</option>
                                      <option value="2">Ất</option>
                                      <option value="3">Bính</option>
                                      <option value="4">Đinh</option>
                                      <option value="5">Mậu</option>
                                      <option value="6">Kỷ</option>
                                      <option value="7">Canh</option>
                                      <option value="8">Tân</option>
                                      <option value="9">Nhâm</option>
                                      <option value="10">Quý</option>
                                    </select>
                                        <select name="ID_CHILUUNIEN" id="ID_CHILUUNIEN">
                                      <option value="1">Tý</option>
                                      <option value="2">Sửu</option>
                                      <option value="3">Dần</option>
                                      <option value="4">Mão</option>
                                      <option value="5">Thìn</option>
                                      <option value="6">Tỵ</option>
                                      <option value="7">Ngọ</option>
                                      <option value="8">Mùi</option>
                                      <option value="9">Thân</option>
                                      <option value="10">Dậu</option>
                                      <option value="11">Tuất</option>
                                      <option value="12">Hợi</option>
                                    </select>
                                    </p>
                                    <p>
                                        <input type="checkbox" name="ID_LUUDAIVAN" id="ID_LUUDAIVAN">
                                        <label for="ID_LUUDAIVAN"></label> Lưu Đại Vận (*)</p>
                                    <p>
                                        <input type="checkbox" name="ID_LUUNIEN" id="ID_LUUNIEN">
                                        <label for="ID_NAMXEM"></label> Lưu Niên (**)</p>
                                    <p>
                                        <input type="checkbox" name="ID_LUUNGUYET" id="ID_LUUNGUYET">
                                        <label for="ID_LUUNGUYET"></label> Lưu Nguyệt
                                        <label for="ID_TXTLUUNGUYET"></label>
                                        <input type="text" name="ID_TXTLUUNGUYET" id="ID_TXTLUUNGUYET"> (***)
                                    </p>
                                </fieldset>
                                <p>&nbsp;</p>
                            </form>
                            <p><img id="canvasImg" alt="Right click to save me!"> </p>
                            <script type="text/javascript">
                                function main() {
                                    var ngay;
                                    var thang;
                                    var cannam;
                                    var chinam;
                                    var gio;
                                    var gioitinh;
                                    var flag = new Array();
                                    var flg = new Array();

                                    var list = document.getElementById('ID_GIOITINH');
                                    for (var i = 0; i < list.options.length; ++i) {
                                        if (list.options[i].selected)
                                            gioitinh = parseInt(list.options[i].value);
                                    }
                                    list = document.getElementById('ID_CANNAM');
                                    for (var i = 0; i < list.options.length; ++i) {
                                        if (list.options[i].selected)
                                            cannam = parseInt(list.options[i].value);
                                    }
                                    list = document.getElementById('ID_CHINAM');
                                    for (var i = 0; i < list.options.length; ++i) {
                                        if (list.options[i].selected)
                                            chinam = parseInt(list.options[i].value);
                                    }
                                    list = document.getElementById('ID_GIO');
                                    for (var i = 0; i < list.options.length; ++i) {
                                        if (list.options[i].selected)
                                            gio = parseInt(list.options[i].value);
                                    }
                                    ngay = parseInt(document.getElementById('ID_NGAY').value);
                                    thang = parseInt(document.getElementById('ID_THANG').value);

                                    var id_thaitue = 1;
                                    var id_tapdieu = 1;
                                    var id_bacsi = 1;
                                    var id_tuongtinh = 1;
                                    var id_luunien = 0;
                                    var id_luunguyet = 0;
                                    var id_luudaivan = 0;
                                    var canluunien;
                                    var chiluunien;
                                    var thangluunguyet;

                                    if (document.getElementById('ID_LUUDAIVAN').checked)
                                        id_luudaivan = 1;
                                    if (document.getElementById('ID_LUUNIEN').checked)
                                        id_luunien = 1;
                                    if (document.getElementById('ID_LUUNGUYET').checked)
                                        id_luunguyet = 1;
                                    if (!document.getElementById('ID_TAPDIEU').checked)
                                        id_tapdieu = 0;
                                    if (!document.getElementById('ID_THAITUE').checked)
                                        id_thaitue = 0;
                                    if (!document.getElementById('ID_BACSI').checked)
                                        id_bacsi = 0;
                                    if (!document.getElementById('ID_TUONGTINH').checked)
                                        id_tuongtinh = 0;
                                    list = document.getElementById('ID_CANLUUNIEN');
                                    for (var i = 0; i < list.options.length; ++i) {
                                        if (list.options[i].selected)
                                            canluunien = parseInt(list.options[i].value);
                                    }

                                    list = document.getElementById('ID_CHILUUNIEN');
                                    for (var i = 0; i < list.options.length; ++i) {
                                        if (list.options[i].selected)
                                            chiluunien = parseInt(list.options[i].value);
                                    }
                                    if (id_luunguyet == 1)
                                        thangluunguyet = parseInt(document.getElementById('ID_TXTLUUNGUYET').value);

                                    for (var i = 1; i <= 12; i++) flg[i] = 0;
                                    for (var i = 1; i <= 12; i++) flag[i] = 0;
                                    // setup our test canvas
                                    // and a simple drawing function
                                    function anthienma(tchinam, ch) {
                                        var thienma;
                                        if (tchinam == 3 || tchinam == 7 || tchinam == 11) {
                                            thienma = 7;
                                        } else if (tchinam == 4 || tchinam == 8 || tchinam == 12) {
                                            thienma = 4;
                                        } else if (tchinam == 5 || tchinam == 9 || tchinam == 1) {
                                            thienma = 1;
                                        } else if (tchinam == 6 || tchinam == 10 || tchinam == 2) {
                                            thienma = 10;
                                        }

                                        ansao(thienma, "Thiên Mã" + ch, "#2F4F4F");
                                    }

                                    function anluuxuongkhuc(tcannam, ch) {
                                        var luuxuong;
                                        var luukhuc;

                                        if (tcannam == 1) {
                                            luuxuong = 4;
                                            luukhuc = 8;
                                        } else if (tcannam == 2) {
                                            luuxuong = 5;
                                            luukhuc = 7;
                                        } else if (tcannam == 3) {
                                            luuxuong = 7;
                                            luukhuc = 5;
                                        } else if (tcannam == 4) {
                                            luuxuong = 8;
                                            luukhuc = 4;
                                        } else if (tcannam == 5) {
                                            luuxuong = 7;
                                            luukhuc = 5;
                                        } else if (tcannam == 6) {
                                            luuxuong = 8;
                                            luukhuc = 4;
                                        } else if (tcannam == 7) {
                                            luuxuong = 10;
                                            luukhuc = 2;
                                        } else if (tcannam == 8) {
                                            luuxuong = 11;
                                            luukhuc = 1;
                                        } else if (tcannam == 9) {
                                            luuxuong = 1;
                                            luukhuc = 11;
                                        } else if (tcannam == 10) {
                                            luuxuong = 2;
                                            luukhuc = 10;
                                        }
                                        ansao(luuxuong, "Văn Xương" + ch, '#A9A9A9');
                                        ansao(luukhuc, "Văn Khúc" + ch, '#1E90FF');
                                    }

                                    function antuhoa(tcannam, ch) {
                                        if (tcannam == 1) {
                                            p = tuvi + 4;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Lộc" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = thienphu + 10;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Quyền" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi + 8;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Khoa" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi + 9;
                                            p = check(p);
                                            context.fillStyle = 'black';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Kỵ" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;
                                        }

                                        if (tcannam == 2) {
                                            p = tuvi + 11;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Lộc" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = thienphu + 5;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Quyền" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Khoa" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = thienphu + 1;
                                            p = check(p);
                                            context.fillStyle = 'black';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Kỵ" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;
                                        }

                                        if (tcannam == 3) {
                                            p = tuvi + 7;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Lộc" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi + 11;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Quyền" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = vx;
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Khoa" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi + 4;
                                            p = check(p);
                                            context.fillStyle = 'black';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Kỵ" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;
                                        }

                                        if (tcannam == 4) {
                                            p = thienphu + 1;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Lộc" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi + 7;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Quyền" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi + 11;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Khoa" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = thienphu + 3;
                                            p = check(p);
                                            context.fillStyle = 'black';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Kỵ" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;
                                        }

                                        if (tcannam == 5) {
                                            p = thienphu + 2;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Lộc" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = thienphu + 1;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Quyền" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi + 9;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Khoa" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi + 11;
                                            p = check(p);
                                            context.fillStyle = 'black';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Kỵ" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;
                                        }

                                        if (tcannam == 6) {
                                            p = tuvi + 8;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Lộc" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = thienphu + 2;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Quyền" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = thienphu + 5;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Khoa" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = vk;
                                            context.fillStyle = 'black';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Kỵ" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;
                                        }

                                        if (tcannam == 7) {
                                            p = tuvi + 9;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Lộc" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi + 8;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Quyền" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = thienphu;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Khoa" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi + 7;
                                            p = check(p);
                                            context.fillStyle = 'black';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Kỵ" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;
                                        }

                                        if (tcannam == 8) {
                                            p = thienphu + 3;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Lộc" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi + 9;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Quyền" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = vk;
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Khoa" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = vx
                                            context.fillStyle = 'black';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Kỵ" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;
                                        }

                                        if (tcannam == 9) {
                                            p = thienphu + 5;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Lộc" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Quyền" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = thienphu;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Khoa" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = tuvi + 8;
                                            p = check(p);
                                            context.fillStyle = 'black';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Kỵ" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;
                                        }

                                        if (tcannam == 10) {
                                            p = thienphu + 10;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Lộc" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = thienphu + 3;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Quyền" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = thienphu + 1;
                                            p = check(p);
                                            context.fillStyle = '#008000';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Khoa" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;

                                            p = thienphu + 2;
                                            p = check(p);
                                            context.fillStyle = 'black';
                                            context.textAlign = 'left';
                                            context.fillText("Hóa Kỵ" + ch, x[p] - 83 + 83 * flg[p], y[p] + 50 + d * flag[p]);
                                            flag[p]++;
                                        }

                                    }

                                    function anlocton(tcannam, ch) {
                                        var tlocton;
                                        var kinhduong;
                                        var dala;

                                        if (tcannam == 1) tlocton = 1;
                                        else if (tcannam == 2) tlocton = 2;
                                        else if (tcannam == 3) tlocton = 4;
                                        else if (tcannam == 4) tlocton = 5;
                                        else if (tcannam == 5) tlocton = 4;
                                        else if (tcannam == 6) tlocton = 5;
                                        else if (tcannam == 7) tlocton = 7;
                                        else if (tcannam == 8) tlocton = 8;
                                        else if (tcannam == 9) tlocton = 10;
                                        else if (tcannam == 10) tlocton = 11;

                                        kinhduong = tlocton + 1;
                                        dala = tlocton + 11;

                                        ansao(tlocton, "Lộc Tồn" + ch, "black");
                                        ansao(kinhduong, "Kình Dương" + ch, "#696969");
                                        ansao(dala, "Đà La" + ch, "#696969");

                                        return tlocton;
                                    }

                                    function ankhoiviet(tcannam, ch) {
                                        var tk;
                                        var tv;
                                        if (tcannam == 1 || tcannam == 5 || tcannam == 7) {
                                            tk = 12;
                                            tv = 6
                                        } else if (tcannam == 2 || tcannam == 6) {
                                            tk = 11;
                                            tv = 7;
                                        } else if (tcannam == 3 || tcannam == 4) {
                                            tk = 10;
                                            tv = 8;
                                        } else if (tcannam == 9 || tcannam == 10) {
                                            tk = 2;
                                            tv = 4;
                                        } else if (tcannam == 8) {
                                            tk = 5;
                                            tv = 1;
                                        }

                                        ansao(tk, "Thiên Khôi" + ch, '#FF8C00');

                                        ansao(tv, "Thiên Việt" + ch, '#FF8C00');

                                    }

                                    function check(e) {
                                        var temp;
                                        temp = e;

                                        if (e > 12)
                                            temp = e - 12;

                                        if (e <= 0) {
                                            temp = e + 12;
                                        }

                                        return temp;
                                    }

                                    function ansao(vitrisao, tensao, mau) {
                                        var temp;
                                        temp = check(vitrisao);
                                        context.fillStyle = mau;
                                        context.fillText(tensao, x[temp] - 83 + 83 * flg[temp], y[temp] + 50 + d * flag[temp]);
                                        flag[temp]++;
                                        if (flag[temp] > 10) {
                                            flg[temp]++;
                                            flag[temp] = 0;
                                        }
                                    }

                                    function anthaitue(tchinam, ch) {
                                        var tue = new Array();
                                        tue[1] = "Thái Tuế";
                                        tue[2] = "Hối Khí";
                                        tue[3] = "Tang Môn";
                                        tue[4] = "Quán Sách";
                                        tue[5] = "Quan Phù";
                                        tue[6] = "Tiểu Hao";
                                        tue[7] = "Tuế Phá";
                                        tue[8] = "Long Đúc";
                                        tue[9] = "Bạch Hổ";
                                        tue[10] = "Thiên Đức";
                                        tue[11] = "Điếu Khách";
                                        tue[12] = "Bệnh Phù";

                                        j = tchinam + 10;
                                        for (i = 1; i <= 12; i++) {
                                            j = check(j);
                                            ansao(j, tue[i] + ch, "#FFA07A");
                                            j++;
                                        }
                                    }

                                    function antuongtinh() {
                                        var khoituong;
                                        var tuongtinh = new Array();

                                        tuongtinh[1] = "Tướng Tinh";
                                        tuongtinh[2] = "Phan Anh";
                                        tuongtinh[3] = "Tuế Dịch";
                                        tuongtinh[4] = "Tức Thần";
                                        tuongtinh[5] = "Hoa Cái";
                                        tuongtinh[6] = "Kiếp Sát";
                                        tuongtinh[7] = "Tai Sát";
                                        tuongtinh[8] = "Thiên Sát";
                                        tuongtinh[9] = "Chỉ Bối";
                                        tuongtinh[10] = "Hàm Trì";
                                        tuongtinh[11] = "Nguyệt Sát";
                                        tuongtinh[12] = "Vong Thần";

                                        if (chinam == 3 || chinam == 7 || chinam == 11) {
                                            khoituong = 5;
                                        } else if (chinam == 4 || chinam == 8 || chinam == 12) {
                                            khoituong = 2;
                                        } else if (chinam == 5 || chinam == 9 || chinam == 1) {
                                            khoituong = 11;
                                        } else if (chinam == 6 || chinam == 10 || chinam == 2) {
                                            khoituong = 8;
                                        }

                                        j = khoituong;
                                        for (i = 1; i <= 12; i++) {
                                            j = check(j);
                                            ansao(j, tuongtinh[i], "#8A2BE2");
                                            j++;
                                        }
                                    }

                                    function anbacsi() {
                                        var bacsi = new Array();

                                        bacsi[1] = "Bác sĩ";
                                        bacsi[2] = "Lực Sĩ";
                                        bacsi[3] = "Thanh Long";
                                        bacsi[4] = "Tiểu Hao";
                                        bacsi[5] = "Tướng Quân";
                                        bacsi[6] = "Tấu Thư";
                                        bacsi[7] = "Phỉ Liêm";
                                        bacsi[8] = "Hỉ Thần";
                                        bacsi[9] = "Bệnh Phù";
                                        bacsi[10] = "Đại Hao";
                                        bacsi[11] = "Phục Binh";
                                        bacsi[12] = "Quan Phủ";
                                        j = locton;
                                        if ((cannam % 2 != 0 && gioitinh == 1) || (cannam % 2 == 0 && gioitinh == 0)) {
                                            for (i = 1; i <= 12; i++) {
                                                j = check(j);
                                                ansao(j, bacsi[i], "green");
                                                j++;
                                            }
                                        } else {
                                            for (i = 1; i <= 12; i++) {
                                                if (j == 0) j = 12;
                                                ansao(j, bacsi[i], "green");
                                                j--;
                                            }
                                        }

                                    }

                                    function antapdieu() {
                                        //an thien quan thien phúc

                                        var thienquan;
                                        var thienphuc;
                                        if (cannam == 1) {
                                            thienquan = 6;
                                            thienphuc = 8;
                                        } else if (cannam == 2) {
                                            thienquan = 3;
                                            thienphuc = 7;
                                        } else if (cannam == 3) {
                                            thienquan = 4;
                                            thienphuc = 11;
                                        } else if (cannam == 4) {
                                            thienquan = 1;
                                            thienphuc = 10;
                                        } else if (cannam == 5) {
                                            thienquan = 2;
                                            thienphuc = 2;
                                        } else if (cannam == 6) {
                                            thienquan = 8;
                                            thienphuc = 1;
                                        } else if (cannam == 7) {
                                            thienquan = 10;
                                            thienphuc = 5;
                                        } else if (cannam == 8) {
                                            thienquan = 8;
                                            thienphuc = 4;
                                        } else if (cannam == 9) {
                                            thienquan = 9;
                                            thienphuc = 5;
                                        } else if (cannam == 10) {
                                            thienquan = 5;
                                            thienphuc = 4;
                                        }
                                        var dx = 83;
                                        p = thienquan;
                                        context.fillStyle = '#5F9EA0';
                                        context.textAlign = 'left';
                                        context.fillText("Thiên quan", x[p] - 83 + dx * flg[p], y[p] + 50 + d * flag[p]);
                                        flag[p]++;
                                        if (flag[p] > 10) {
                                            flg[p]++;
                                            flag[p] = 0;
                                        }

                                        p = thienphuc;
                                        context.fillStyle = '#5F9EA0';
                                        context.textAlign = 'left';
                                        context.fillText("Thiên phúc", x[p] - 83 + dx * flg[p], y[p] + 50 + d * flag[p]);
                                        flag[p]++;
                                        if (flag[p] > 10) {
                                            flg[p]++;
                                            flag[p] = 0;
                                        }

                                        //ket thuc an quan phuc

                                        //an thiên trù
                                        var thientru;
                                        if (cannam == 1 || cannam == 4)
                                            thientru = 4;
                                        else if (cannam == 2 || cannam == 5 || cannam == 8)
                                            thientru = 5;
                                        else if (cannam == 3)
                                            thientru = 11;
                                        else if (cannam == 6)
                                            thientru = 7;
                                        else if (cannam == 7)
                                            thientru = 1;
                                        else if (cannam == 9)
                                            thientru = 8;
                                        else if (cannam == 10)
                                            thientru = 10;

                                        ansao(thientru, "Thiên Trù", "#5F9EA0");
                                        //ket thuc an thiên trù

                                        //an thiên khốc - thiên hư
                                        var thienhu = 4 + chinam;
                                        var thienkhoc = 18 - chinam;

                                        ansao(thienhu, "Thiên Hư", "#5F9EA0");
                                        ansao(thienkhoc, "Thiên Khốc", "#5F9EA0");
                                        //kết thúc an khốc - hư
                                        //an hồng loan - thiên hỉ
                                        var hongloan = 15 - chinam;
                                        var thienhi = hongloan + 6;

                                        /*	p = check(hongloan)
                                            context.fillStyle = 'black';
                                            context.textAlign = 'left';
                                            context.fillText("Hồng Loan",x[p] - 83 ,y[p] + 50 + d*flag[p] );
                                            flag[p]++;
                                            if (flag[p] > 10) 
                                            {
                                                flg[p] ++;
                                                flag[p] = 0;
                                            }*/
                                        ansao(hongloan, "Hồng Loan", "#5F9EA0");
                                        ansao(thienhi, "Thiên Hỉ", "#5F9EA0");

                                        //kết thúc an hồng loan - thiên hỉ

                                        // an cô thần, quả tú
                                        var cothan;
                                        var quatu;

                                        if (chinam == 3 || chinam == 4 || chinam == 5) {
                                            cothan = 4;
                                            quatu = 12;
                                        } else if (chinam == 6 || chinam == 7 || chinam == 8) {
                                            cothan = 7;
                                            quatu = 3;
                                        } else if (chinam == 9 || chinam == 10 || chinam == 11) {
                                            cothan = 10;
                                            quatu = 6;
                                        } else if (chinam == 12 || chinam == 1 || chinam == 2) {
                                            cothan = 1;
                                            quatu = 9;
                                        }

                                        ansao(cothan, "Cô Thần", "#5F9EA0");
                                        ansao(quatu, "Quả Tú", "#5F9EA0");
                                        //kết thúc an cô thần, quả tú

                                        //an đại hao chi
                                        var daihao_chi;
                                        if (chinam % 2 == 0) {
                                            daihao_chi = (chinam - 2) + 5;
                                        } else {
                                            daihao_chi = (chinam - 2) + 7;
                                        }
                                        ansao(daihao_chi, "Đại Hao", "#5F9EA0");
                                        //kết thúc an đại hao chi
                                        //an long trì - phượng các
                                        var longtri = 2 + chinam;
                                        var phuongcac = 22 - chinam;
                                        ansao(longtri, "Long Trì", "#5F9EA0");
                                        ansao(phuongcac, "Phượng Các", "#5F9EA0");
                                        //kết thúc an long trì - phượng các

                                        //an thiên tài, thiên thọ
                                        var thientai = cungmenh + chinam - 1;
                                        var thientho = cungthan + chinam - 1;

                                        ansao(thientai, "Thiên Tài", "#5F9EA0");
                                        ansao(thientho, "Thiên Thọ", "#5F9EA0");
                                        //kết thúc an thiên tài, thiên thọ

                                        //an thai phụ - phong cáo
                                        var daiphu = vk + 2;
                                        var phongcao = vk + 10;

                                        ansao(daiphu, "Đài Phụ", "#5F9EA0");
                                        ansao(phongcao, "Phong Cáo", "#5F9EA0");
                                        //kết thúc an thai phụ - phong cáo

                                        //an thiên hình, thiên diêu
                                        var thiendieu = 12 + thang - 1;
                                        var thienhinh = 8 + thang - 1;

                                        ansao(thienhinh, "Thiên Hình", "#5F9EA0");
                                        ansao(thiendieu, "Thiên Diêu", "#5F9EA0");

                                        //kết thúc an thiên hình, thiên diêu

                                        //an nguyệt giải - thiên vu
                                        var nguyetgiai;
                                        var thienvu;

                                        //tinh nguyet giải	
                                        if (thang == 1 || thang == 2) {
                                            nguyetgiai = 7;
                                        } else if (thang == 3 || thang == 4) {
                                            nguyetgiai = 9;
                                        } else if (thang == 5 || thang == 6) {
                                            nguyetgiai = 11;
                                        } else if (thang == 7 || thang == 8) {
                                            nguyetgiai = 1;
                                        } else if (thang == 9 || thang == 10) {
                                            nguyetgiai = 3;
                                        } else if (thang == 11 || thang == 12) {
                                            nguyetgiai = 5;
                                        }
                                        //ket thuc tính nguyệt giải

                                        //tính thiên vu
                                        if (thang == 1 || thang == 5 || thang == 9) {
                                            thienvu = 4;
                                        } else if (thang == 2 || thang == 6 || thang == 10) {
                                            thienvu = 7;
                                        } else if (thang == 3 || thang == 7 || thang == 11) {
                                            thienvu = 1;
                                        } else if (thang == 4 || thang == 8 || thang == 12) {
                                            thienvu = 10;
                                        }
                                        //kết thúc tính thiên vu	
                                        ansao(nguyetgiai, "Nguyệt Giải", "#5F9EA0");
                                        ansao(thienvu, "Thiên Vu", "#5F9EA0");
                                        //kết thúc an nguyệt giải - thiên vu

                                        //An Thiên Nguyệt
                                        var thiennguyet;
                                        if (thang == 1 || thang == 11) {
                                            thiennguyet = 9;
                                        } else if (thang == 4 || thang == 9 || thang == 12) {
                                            thiennguyet = 1;
                                        } else if (thang == 6) {
                                            thiennguyet = 2;
                                        } else if (thang == 3) {
                                            thiennguyet = 3;
                                        } else if (thang == 2) {
                                            thiennguyet = 4;
                                        } else if (thang == 10) {
                                            thiennguyet = 5;
                                        } else if (thang == 5 || thang == 8) {
                                            thiennguyet = 6;
                                        } else if (thang == 7) {
                                            thiennguyet = 10;
                                        }

                                        ansao(thiennguyet, "Thiên Nguyệt", "#5F9EA0");
                                        //Kết Thúc An thiên nguyệt

                                        //an âm sát
                                        var amsat;

                                        if (thang == 1 || thang == 7) {
                                            amsat = 1;
                                        } else if (thang == 2 || thang == 8) {
                                            amsat = 11;
                                        } else if (thang == 3 || thang == 9) {
                                            amsat = 9;
                                        } else if (thang == 4 || thang == 10) {
                                            amsat = 7;
                                        } else if (thang == 5 || thang == 11) {
                                            amsat = 5;
                                        } else if (thang == 6 || thang == 12) {
                                            amsat = 3;
                                        }

                                        ansao(amsat, "Âm Sát", "#5F9EA0");
                                        //kết thúc an âm sát

                                        //an thương sứ
                                        var thienthuong;
                                        var thiensu;

                                        if ((cannam % 2 != 0 && gioitinh == 1) || (cannam % 2 == 0 && gioitinh == 0)) {
                                            thienthuong = cungmenh + 5;
                                            thiensu = cungmenh + 7;
                                        } else {
                                            thienthuong = cungmenh + 7;
                                            thiensu = cungmenh + 5;
                                        }
                                        ansao(thienthuong, "Thiên Thương", "#5F9EA0");
                                        ansao(thiensu, "Thiên Sứ", "#5F9EA0");
                                        //kết thúc thương sứ

                                        //an thai tọa
                                        var tamthai;
                                        var battoa;

                                        var tinhngay = ngay % 12;
                                        if (tinhngay == 0) tinhngay = 12;

                                        tamthai = tp + tinhngay - 1;
                                        battoa = check(hb) + 12 + 1 - tinhngay;

                                        ansao(tamthai, "Tam Thai", "#5F9EA0");
                                        ansao(battoa, "Bát Tọa", "#5F9EA0");

                                        //kết thúc an thai tọa

                                        //an quang quý
                                        var anquang = vx + tinhngay - 2;
                                        var thienquy = vk + tinhngay - 2;

                                        ansao(anquang, "Ân Quang", "#5F9EA0");
                                        ansao(thienquy, "Thiên Quý", "#5F9EA0");
                                        //hết quang quý
                                        //an nien giai
                                        var niengiai = phuongcac;
                                        ansao(niengiai, "Niên Giải", "black");
                                        //ket thuc an nien giai
                                        // an dau quan
                                        var dauquan;
                                        var tchi = chinam + 10;
                                        tchi = check(tchi);
                                        dauquan = tchi + (13 - thang);
                                        dauquan = check(dauquan);
                                        dauquan = dauquan + gio - 1;
                                        dauquan = check(dauquan);

                                        ansao(dauquan, "Đẩu Quân", "black");
                                        //ketthuc an dau quan
                                    }

                                    var canvas = document.getElementById('myCanvas');
                                    var context = canvas.getContext('2d');
                                    // draw 

                                    context.beginPath();
                                    context.clearRect(0, 0, 704, 800);
                                    for (i = 0; i < 4; i++) {
                                        context.rect(176 * i, 0, 176, 200);
                                        if (i > 0) {
                                            context.rect(0, 200 * i, 176, 200);
                                            context.rect(176 * i, 600, 176, 200);
                                            context.rect(528, 200 * i, 176, 200);
                                        }
                                    }
                                    context.fillStyle = '#F5FFFA';
                                    context.fill();
                                    context.strokeStyle = '#8B0000';
                                    context.stroke();

                                    context.font = 'bold 10pt Calibri';
                                    context.textAlign = 'center';
                                    context.fillStyle = 'black';

                                    var x = new Array();
                                    var y = new Array();
                                    var cung = new Array();

                                    var xa_x = 176 / 2;
                                    var xa_y = 20;
                                    var ngo_x = xa_x + 176;
                                    var ngo_y = 20;
                                    var mui_x = ngo_x + 176;
                                    var mui_y = 20;
                                    var than_x = mui_x + 176;
                                    var than_y = 20;
                                    var thin_y = xa_y + 200;
                                    var thin_x = xa_x;
                                    var mao_x = xa_x;
                                    var mao_y = thin_y + 200;
                                    var dan_x = xa_x;
                                    var dan_y = mao_y + 200;
                                    var suu_y = dan_y;
                                    var suu_x = dan_x + 176;
                                    var ty_x = suu_x + 176;
                                    var ty_y = suu_y;
                                    var hoi_x = ty_x + 176;
                                    var hoi_y = suu_y;
                                    var dau_x = than_x;
                                    var dau_y = than_y + 200;
                                    var tuat_x = dau_x;
                                    var tuat_y = dau_y + 200;

                                    x[1] = dan_x;
                                    x[2] = mao_x;
                                    x[3] = thin_x;
                                    x[4] = xa_x;
                                    x[5] = ngo_x;
                                    x[6] = mui_x;
                                    x[7] = than_x;
                                    x[8] = dau_x;
                                    x[9] = tuat_x;
                                    x[10] = hoi_x;
                                    x[11] = ty_x;
                                    x[12] = suu_x;

                                    y[1] = dan_y;
                                    y[2] = mao_y;
                                    y[3] = thin_y;
                                    y[4] = xa_y;
                                    y[5] = ngo_y;
                                    y[6] = mui_y;
                                    y[7] = than_y;
                                    y[8] = dau_y;
                                    y[9] = tuat_y;
                                    y[10] = hoi_y;
                                    y[11] = ty_y;
                                    y[12] = suu_y;


                                    //an cung mệnh

                                    cung[1] = "MỆNH";
                                    cung[2] = "PHỤ MẪU";
                                    cung[3] = "PHÚC ĐỨC";
                                    cung[4] = "ĐIỀN TRẠCH";
                                    cung[5] = "QUAN LỘC";
                                    cung[6] = "GIAO HỮU";
                                    cung[7] = "THIÊN DI";
                                    cung[8] = "TẬT ÁCH";
                                    cung[9] = "TÀI BẠCH";
                                    cung[10] = "TỬ TỨC";
                                    cung[11] = "PHU THÊ";
                                    cung[12] = "HUYNH ĐỆ";

                                    var cungmenh = check(Math.abs(12 + thang + 1 - gio));
                                    var cungthan = check(thang + gio - 1);
                                    var j = cungmenh;

                                    for (i = 1; i <= 12; i++) {
                                        if (j > 12) j = 1;
                                        if (j == cungthan) {
                                            cung[i] = cung[i] + " - THÂN";
                                        }
                                        context.fillText(cung[i], x[j], y[j]);
                                        j++;
                                    }

                                    //kết thúc an cung mệnh
                                    //////////////////////////////

                                    var can = new Array();
                                    can[1] = "Giáp";
                                    can[2] = "Ất";
                                    can[3] = "Bính";
                                    can[4] = "Đinh";
                                    can[5] = "Mậu";
                                    can[6] = "Kỷ";
                                    can[7] = "Canh";
                                    can[8] = "Tân";
                                    can[9] = "Nhâm";
                                    can[10] = "Quý";

                                    var chi = new Array();
                                    chi[1] = "Tý";
                                    chi[2] = "Sửu";
                                    chi[3] = "Dần";
                                    chi[4] = "Mão";
                                    chi[5] = "Thìn";
                                    chi[6] = "Tỵ";
                                    chi[7] = "Ngọ";
                                    chi[8] = "Mùi";
                                    chi[9] = "Thân";
                                    chi[10] = "Dậu";
                                    chi[11] = "Tuất";
                                    chi[12] = "Hợi";

                                    //tính cục ngũ hành
                                    var a;
                                    var b;
                                    var chicung = cungmenh + 2;
                                    if (chicung > 12) chicung = chicung - 12;

                                    var cancung;
                                    if (chicung == 1 || chicung == 7 || chicung == 2 || chicung == 8)
                                        a = 0;
                                    if (chicung == 11 || chicung == 12 || chicung == 5 || chicung == 6)
                                        a = 2;
                                    if (chicung == 3 || chicung == 4 || chicung == 9 || chicung == 10)
                                        a = 1;
                                    if (cannam == 1 || cannam == 6) cancung = 3;
                                    if (cannam == 2 || cannam == 7) cancung = 5;
                                    if (cannam == 3 || cannam == 8) cancung = 7;
                                    if (cannam == 4 || cannam == 9) cancung = 9;
                                    if (cannam == 5 || cannam == 10) cancung = 1;

                                    var temp = cancung;
                                    cancung = cancung + (chicung - 2) - 1;


                                    if (cancung > 10) {
                                        cancung = cancung - 10;
                                    }



                                    if (cancung == 1 || cancung == 2) b = 1;
                                    if (cancung == 3 || cancung == 4) b = 2;
                                    if (cancung == 5 || cancung == 6) b = 3;
                                    if (cancung == 7 || cancung == 8) b = 4;
                                    if (cancung == 9 || cancung == 10) b = 5;

                                    var hanh = new Array();
                                    hanh[2] = "Thủy Nhị Cục";
                                    hanh[3] = "Mộc Tam Cục";
                                    hanh[4] = "Kim Tứ Cục";
                                    hanh[5] = "Thổ Ngũ Cục";
                                    hanh[6] = "Hỏa Lục Cục";

                                    var ihanh;
                                    var cuc;
                                    ihanh = a + b;
                                    if (a + b > 5) ihanh = a + b - 5;

                                    if (ihanh == 1) cuc = 4;
                                    if (ihanh == 2) cuc = 2;
                                    if (ihanh == 3) cuc = 6;
                                    if (ihanh == 4) cuc = 5;
                                    if (ihanh == 5) cuc = 3;

                                    context.fillText(hanh[cuc], 360, 440);
                                    context.fillText("Ngày: " + ngay, 360, 360);
                                    context.fillText("Tháng:" + thang, 360, 380);
                                    context.fillText("Năm: " + can[cannam] + " " + chi[chinam], 360, 400);
                                    context.fillText("Giờ: " + chi[gio], 360, 420);

                                    cancung = temp;
                                    //an can cung	
                                    context.font = '8pt Calibri';
                                    j = cancung;
                                    for (i = 1; i <= 12; i++) {
                                        if (j > 10) j = 1;
                                        var k = check(i + 2);
                                        context.textAlign = 'left'
                                        context.fillStyle = 'red';
                                        context.fillText(can[j], x[i] - 83, y[i]);

                                        context.textAlign = 'right'
                                        context.fillStyle = 'blue';
                                        context.fillText(chi[k], x[i] + 80, y[i]);
                                        j++;
                                    }
                                    //kết thúc an can cung

                                    //an đại vận
                                    context.textAlign = 'right';
                                    j = cungmenh;
                                    var k = cuc;
                                    var tempk;
                                    var bddaivan;
                                    var ktdaivan;

                                    if ((cannam % 2 != 0 && gioitinh == 1) || (cannam % 2 == 0 && gioitinh == 0)) {
                                        for (i = 0; i < 12; i++) {
                                            bddaivan = k + i * 10;
                                            ktdaivan = k - 1 + (i + 1) * 10;
                                            if (j > 12) j = 1;
                                            context.fillText(bddaivan + " - " + ktdaivan, x[j] + 80, y[j] + 170);
                                            j++;
                                        }
                                    } else {
                                        j = j + 1;
                                        for (i = 11; i >= 0; i--) {
                                            bddaivan = k + i * 10;
                                            ktdaivan = k - 1 + (i + 1) * 10;
                                            if (j > 12) j = 1;
                                            context.fillText(bddaivan + " - " + ktdaivan, x[j] + 80, y[j] + 170);
                                            j++;
                                        }
                                    }
                                    // kết thúc an đại vận

                                    //kết thúc tính cục ngũ hành

                                    //an tử vi

                                    var X = cuc - ngay % cuc;
                                    if (ngay % cuc == 0) X = 0;
                                    var Y = (ngay + X) / cuc;
                                    var z;
                                    if (X % 2 == 0) z = Y + X;
                                    if (X % 2 != 0) z = Y - X;

                                    if (z > 12) z = z - 12;

                                    //kết thúc an tử vi

                                    //an sao tử vi

                                    context.font = 'bold 10pt Calibri';
                                    context.textAlign = 'center';
                                    var sao = new Array();
                                    sao[1] = "TỬ VI";
                                    sao[2] = "LIÊM TRINH";
                                    sao[3] = "THIÊN ĐỒNG";
                                    sao[4] = "VŨ KHÚC";
                                    sao[5] = "THÁI DƯƠNG";
                                    sao[6] = "THIÊN CƠ";
                                    sao[7] = "THIÊN PHỦ";
                                    sao[8] = "THÁI ÂM";
                                    sao[9] = "THAM LANG";
                                    sao[10] = "CỰ MÔN";
                                    sao[11] = "THIÊN TƯỚNG";
                                    sao[12] = "THIÊN LƯƠNG";
                                    sao[13] = "THẤT SÁT";
                                    sao[14] = "PHÁ QUÂN";


                                    var temp;
                                    var tuvi = z;

                                    context.fillStyle = '#FFD700';
                                    context.fillText(sao[1], x[z], y[z] + 20);
                                    flag[z] = 1;

                                    temp = z + 4;
                                    z = check(temp);
                                    context.fillStyle = 'red';
                                    context.fillText(sao[2], x[z], y[z] + 20);
                                    flag[z] = 1;

                                    temp = z + 3;
                                    z = check(temp);
                                    context.fillStyle = '#00008B';
                                    context.fillText(sao[3], x[z], y[z] + 20);
                                    flag[z] = 1;

                                    temp = z + 1;
                                    z = check(temp);
                                    context.fillStyle = '#C0C0C0';
                                    context.fillText(sao[4], x[z], y[z] + 20);
                                    flag[z] = 1;

                                    temp = z + 1;
                                    z = check(temp);
                                    context.fillStyle = 'red';
                                    context.fillText(sao[5], x[z], y[z] + 20);
                                    flag[z] = 1;

                                    temp = z + 2;
                                    z = check(temp);
                                    context.fillStyle = '#008000';
                                    context.fillText(sao[6], x[z], y[z] + 20);
                                    flag[z] = 1;

                                    var thienphu = 14 - tuvi;
                                    if (tuvi == 1) thienphu == 1;

                                    z = thienphu;
                                    temp = z;

                                    var d;

                                    z = check(temp);
                                    d = 15;
                                    if (flag[z] == 0) d = 0;
                                    context.fillStyle = '#FFD700';
                                    context.fillText(sao[7], x[z], y[z] + 20 + d);


                                    temp = z + 1;
                                    z = check(temp);
                                    d = 15;
                                    if (flag[z] == 0) d = 0;
                                    context.fillStyle = '#00008B';
                                    context.fillText(sao[8], x[z], y[z] + 20 + d);


                                    temp = z + 1;
                                    z = check(temp);
                                    d = 15;
                                    if (flag[z] == 0) d = 0;
                                    context.fillStyle = '#008000';
                                    context.fillText(sao[9], x[z], y[z] + 20 + d);

                                    temp = z + 1;
                                    z = check(temp);
                                    d = 15;
                                    if (flag[z] == 0) d = 0;
                                    context.fillStyle = '#696969';
                                    context.fillText(sao[10], x[z], y[z] + 20 + d);

                                    temp = z + 1;
                                    z = check(temp);
                                    d = 15;
                                    if (flag[z] == 0) d = 0;
                                    context.fillStyle = '#00008B';
                                    context.fillText(sao[11], x[z], y[z] + 20 + d);

                                    temp = z + 1;
                                    z = check(temp);
                                    d = 15;
                                    if (flag[z] == 0) d = 0;
                                    context.fillStyle = '#008000';
                                    context.fillText(sao[12], x[z], y[z] + 20 + d);

                                    temp = z + 1;
                                    z = check(temp);
                                    d = 15;
                                    if (flag[z] == 0) d = 0;
                                    context.fillStyle = '#C0C0C0';
                                    context.fillText(sao[13], x[z], y[z] + 20 + d);

                                    temp = z + 4;
                                    z = check(temp);
                                    d = 15;
                                    if (flag[z] == 0) d = 0;
                                    context.fillStyle = '#00008B';
                                    context.fillText(sao[14], x[z], y[z] + 20 + d);



                                    //an tứ hóa
                                    for (i = 1; i <= 12; i++) flag[i] = 0;
                                    var p;
                                    d = 10;
                                    context.font = 'bold 8pt Calibri';
                                    //an xương khúc
                                    var vx = 22 - gio;
                                    var vk = gio + 2;
                                    p = check(vx);
                                    vx = p;
                                    context.fillStyle = '#A9A9A9';
                                    context.textAlign = 'left';
                                    context.fillText("Văn Xương", x[p] - 83, y[p] + 50);
                                    flag[p]++;

                                    p = check(vk);
                                    vk = p;
                                    context.fillStyle = '#1E90FF';
                                    context.textAlign = 'left';
                                    context.fillText("Văn Khúc", x[p] - 83, y[p] + 50 + d * flag[p]);
                                    flag[p]++;

                                    //kết thúc an xương khúc	
                                    //an tả hữu
                                    var tp = 2 + thang;
                                    var hb = 22 - thang;

                                    p = check(tp);
                                    context.fillStyle = '#FF8C00';
                                    context.textAlign = 'left';
                                    context.fillText("Tả Phụ", x[p] - 83, y[p] + 50 + d * flag[p]);
                                    flag[p]++;
                                    tp = p;

                                    p = check(hb);
                                    context.fillStyle = '#00008B';
                                    context.textAlign = 'left';
                                    context.fillText("Hữu Bật", x[p] - 83, y[p] + 50 + d * flag[p]);
                                    flag[p]++;
                                    hb = p;
                                    //an khôi việt
                                    ankhoiviet(cannam, "");
                                    //an tứ hóa

                                    antuhoa(cannam, "");

                                    context.fillStyle = '#7FFF00';
                                    var ts = new Array();
                                    ts[1] = "Trường Sinh";
                                    ts[2] = "Mộc Dục";
                                    ts[3] = "Quan Đới";
                                    ts[4] = "Lâm Quan";
                                    ts[5] = "Đế Vượng";
                                    ts[6] = "Suy";
                                    ts[7] = "Bệnh";
                                    ts[8] = "Tử";
                                    ts[9] = "Mộ";
                                    ts[10] = "Tuyệt";
                                    ts[11] = "Thai";
                                    ts[12] = "Dưỡng";

                                    context.textAlign = 'left';
                                    if (cuc == 2) p = 7;
                                    if (cuc == 3) p = 10;
                                    if (cuc == 4) p = 4;
                                    if (cuc == 5) p = 7;
                                    if (cuc == 6) p = 1;


                                    if ((cannam % 2 != 0 && gioitinh == 1) || (cannam % 2 == 0 && gioitinh == 0)) {
                                        for (i = 1; i <= 12; i++) {
                                            p = check(p);
                                            context.fillText(ts[i], x[p] - 83, y[p] + 170);
                                            p++;
                                        }
                                    } else {
                                        p = p + 1;
                                        for (i = 12; i >= 1; i--) {
                                            p = check(p);
                                            context.fillText(ts[i], x[p] - 83, y[p] + 170);
                                            p++;
                                        }
                                    }

                                    //an lộc tồn kình đà
                                    var locton = anlocton(cannam, "");
                                    //hết an lộc tồn kình đà
                                    anthienma(chinam, "");
                                    //an linh tinh hoa tinh
                                    var hoatinh;
                                    var linhtinh;
                                    var bd_hoa;
                                    var bd_linh;

                                    if (chinam == 3 || chinam == 7 || chinam == 11) {
                                        bd_hoa = 12;
                                        bd_linh = 2;
                                    } else if (chinam == 4 || chinam == 8 || chinam == 12) {
                                        bd_hoa = 8;
                                        bd_linh = 9;
                                    } else if (chinam == 5 || chinam == 9 || chinam == 1) {
                                        bd_hoa = 1;
                                        bd_linh = 9;
                                    } else if (chinam == 6 || chinam == 10 || chinam == 2) {
                                        bd_hoa = 2;
                                        bd_linh = 9;
                                    }

                                    hoatinh = bd_hoa + gio - 1;
                                    linhtinh = bd_linh + gio - 1;

                                    ansao(hoatinh, "Hỏa Tinh", "red");
                                    ansao(linhtinh, "Linh Tinh", "red");
                                    //ket thuc an linh hoa
                                    //an địa không địa kiếp
                                    var diakhong;
                                    var diakiep;

                                    diakiep = 10 + gio - 1;
                                    diakhong = 12 + 10 + 1 - gio;

                                    ansao(diakhong, "Địa Không", "red");
                                    ansao(diakiep, "Địa Kiếp", "red");
                                    //hết an không kiếp
                                    //Thiên không - thiên mã
                                    var thienkhong = chinam - 2 + 1;
                                    ansao(thienkhong, "Thiên Không", "red");


                                    //kết thúc an thiên không - thiên mã
                                    //an tap dieu
                                    if (id_tapdieu == 1)
                                        antapdieu();

                                    for (i = 1; i <= 12; i++) {
                                        flg[i] = 1.25;
                                        flag[i] = 0;
                                    }

                                    //an thái tuế thập nhị thần
                                    if (id_thaitue == 1) {
                                        anthaitue(chinam, "");
                                    }
                                    //hết an thái tuế

                                    //an bác sĩ thập nhị thần
                                    if (id_bacsi == 1) {
                                        anbacsi();
                                    }
                                    //kết thúc an bác sĩ thập nhị thần

                                    //an tuong tiền chi tinh
                                    if (id_tuongtinh == 1)
                                        antuongtinh();


                                    var tuankhong;
                                    var trietkhong;
                                    j = chinam;
                                    for (i = cannam; i <= 10; i++) {
                                        j++;
                                        j = check(j);
                                    }

                                    if (cannam == 1 || cannam == 6) trietkhong = 7;
                                    else if (cannam == 2 || cannam == 7) trietkhong = 5;
                                    else if (cannam == 3 || cannam == 8) trietkhong = 3;
                                    else if (cannam == 4 || cannam == 9) trietkhong = 1;
                                    else if (cannam == 5 || cannam == 10) trietkhong = 11;


                                    var temp1;
                                    var temp2;

                                    context.textAlign = 'center';

                                    tuankhong = check(j + 10);

                                    temp1 = flag[tuankhong];
                                    flg[tuankhong] = 1;
                                    flag[tuankhong] = 12.8;

                                    temp2 = flag[tuankhong + 1];
                                    flg[tuankhong + 1] = 1;
                                    flag[tuankhong + 1] = 12.8;

                                    temp1 = flag[trietkhong];
                                    flag[trietkhong] = 12.8;
                                    flg[trietkhong] = 1;

                                    temp2 = flag[trietkhong + 1];
                                    flag[trietkhong + 1] = 12.8;
                                    flg[trietkhong + 1] = 1;



                                    if (tuankhong != trietkhong) {
                                        ansao(tuankhong, "TUẦN", "black");
                                        ansao(tuankhong + 1, "TUẦN", "black");

                                        ansao(trietkhong, "TIỆT", "black");
                                        ansao(trietkhong + 1, "TIỆT", "black");
                                    } else {
                                        ansao(tuankhong, "TUẦN-TIỆT", "black");
                                        ansao(tuankhong + 1, "TUẦN-TIỆT", "black");
                                    }

                                    flag[tuankhong] = temp1;
                                    flag[tuankhong + 1] = temp2;
                                    flg[tuankhong] = 1.25;
                                    flg[tuankhong + 1] = 1.25;


                                    flag[trietkhong] = temp1;
                                    flag[trietkhong + 1] = temp2;
                                    flg[trietkhong] = 1.25;
                                    flg[trietkhong + 1] = 1.25;
                                    //an dauquan

                                    var cannamxem = canluunien;
                                    var chinamxem = chiluunien;

                                    i = cannam;
                                    j = chinam;

                                    var tuoi = 1;

                                    while (i != cannamxem || j != chinamxem) {
                                        tuoi++;
                                        i++;
                                        j++;
                                        if (i > 10) i = 1;
                                        j = check(j);
                                    }

                                    var cungdaivan = cungmenh;
                                    var step;
                                    if ((cannam % 2 != 0 && gioitinh == 1) || (cannam % 2 == 0 && gioitinh == 0)) {
                                        step = 1
                                    } else {
                                        step = -1;
                                    }

                                    for (i = 0; i < 12; i++) {
                                        bddaivan = k + i * 10;
                                        ktdaivan = k - 1 + (i + 1) * 10;
                                        if (cungdaivan > 12) cungdaivan = 1;
                                        if (cungdaivan == 0) cungdaivan = 12;
                                        if (tuoi >= bddaivan && tuoi <= ktdaivan) {
                                            break;
                                        }
                                        cungdaivan = cungdaivan + step;
                                    }

                                    //an luu dai van
                                    //ket thuc an luu dai van
                                    var cancungdaivan;
                                    cancungdaivan = cungdaivan + cancung - 1;
                                    if (cancungdaivan > 10)
                                        cancungdaivan = cancungdaivan - 10;

                                    var chicungdaivan;
                                    chicungdaivan = cungdaivan + 2;
                                    chicungdaivan = check(chicungdaivan);

                                    context.textAlign = 'left';
                                    if (id_luudaivan == 1) {
                                        antuhoa(cancungdaivan, "(*)");
                                        anluuxuongkhuc(cancungdaivan, "(*)");
                                        ankhoiviet(cancungdaivan, "(*)");
                                        anlocton(cancungdaivan, "(*)");
                                        anthienma(chicungdaivan, "(*)");
                                    }

                                    if (id_luunien == 1) {
                                        anthaitue(chiluunien, "(**)");
                                        antuhoa(canluunien, "(**)");
                                        anluuxuongkhuc(canluunien, "(**)");
                                        ankhoiviet(canluunien, "(**)");
                                        anlocton(canluunien, "(**)");
                                        anthienma(chiluunien, "(**)");
                                    }



                                    //ket thuc an dauquan
                                    // save canvas image as data url (png format by default)
                                    var dataURL = canvas.toDataURL();

                                    // set canvasImg image src to dataURL
                                    // so it can be saved as an image
                                    document.getElementById('canvasImg').src = dataURL;
                                }
                            </script>
                            <p>
                                <button onclick="main()">An Sao</button>
                            </p>

                        </div>
                    </th>
                    <th>

                        <fieldset style="margin-right:0px">
                            <!-- <legend></legend> -->
                            <div id="amlich-calendar"></div>
                            <script type="text/javascript">
                                $(function() {
                                    $('#amlich-calendar').amLich({
                                        type: 'calendar',
                                        tableWidth: '250px'
                                    });
                                });
                            </script>

                        </fieldset>

                    </th>
                </tr>
                <div class="copyright">.</div>
            </table>
        </section>
        <footer class="secondary_header footer">
            <div class="copyright">&copy;2020 - <strong>SIMPLE Theme</strong></div>
        </footer>
    </div>
</body>

</html>